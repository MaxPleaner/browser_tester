doctype html
html
  head
    script src='./jquery.js'
    script src='./jquery-ui.js'

    sass:
    
      body, html
        width: 100%
        height: 100%
        background-color: lightgrey
        color: black
        font-family: monospace


      input
        background-color: lightgrey
        color: black

      button
        background-color: lightgrey
        color: black

      .blackbox
        display: block
        margin: 5px
        padding: 5px

      .hidden
        display: none

      .inlinebox
        display: inline-block
        margin: 5px
        padding: 5px

      .command
        display: inline-block
        border: 1px dotted grey
        word-wrap: word-break
        margin: 15px
        padding: 5px

      .center
        text-align: center

      .module
        display: block
        float: left
        border: 1px solid grey
        margin: 5px
        padding: 5px

      .module-command
        display: block
        border: 1px solid grey
        padding: 10px
        margin: 5px

      pre
        background-color: darkgrey

      .sortable-module-command-list
        list-style-type: none
        min-width: 100px
        min-height: 100px

      .clearfix
        clear: both

      .drop-destination-hover
        box-shadow: 0 0 10px yellow


  body
    == yield

  coffee:

    window.initToggling = ->
      $toggleTriggers = $("*[toggles]")
      $toggleTriggers.off("click").on "click", (e) ->
        targetSelector = $(e.currentTarget).attr "toggles"
        $target = $ targetSelector
        $target.toggleClass "hidden"
        true

    window.confirmSubmit = (e) ->
      if confirm("are you sure")
        true # continue with the event
      else
        e.preventDefault()
        false


    window.SocketHelpers = ->

      this.ws = new WebSocket("ws://#{window.document.location.host}/")

      this.ws.onopen = =>
        console.log "ws open"
        this.ws.send JSON.stringify foo: "bar"

      this.ws.onmessage = (msg) ->
        data = JSON.parse msg.data
        console.log "you've got mail: "
        console.dir data

      this.ws.onclose = ->
        console.log "ws closed"

      this